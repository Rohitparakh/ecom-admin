{"ast":null,"code":"var _jsxFileName = \"/Users/rohitparakh/Desktop/Websites/MERN/Ecom_Store/frontend/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport { HeartIcon, SearchIcon } from \"@heroicons/react/outline\";\nimport React, { useCallback, useEffect, useState, useRef } from \"react\";\nimport { debounce } from \"lodash\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const [display, setDisplay] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [searchData, setSearchData] = useState();\n  const wrapperRef = useRef(null);\n  useEffect(() => {\n    debouncedSearchAutocomplete(search);\n  }, [search]);\n  const debouncedSearchAutocomplete = useCallback(debounce(async search => {\n    // console.log(`Searching result after 500 ${search}`)\n    const {\n      data\n    } = await axios.get(`https://localhost:8000/api/search?query=${search !== \"\" ? search : undefined}`);\n    setSearchData(data);\n    console.log(data);\n  }, 500), []);\n  useEffect(() => {\n    window.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      window.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    const {\n      current: wrap\n    } = wrapperRef;\n\n    if (wrap && !wrap.contains(event.target)) {\n      setDisplay(false);\n    }\n  };\n\n  const updateItems = searchData => {\n    setSearchData(searchData);\n    setDisplay(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: wrapperRef,\n    className: \"hidden  bg-white lg:flex items-center  left-1/2  \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" flex items-center w-full lg:w-[40vw]   px-4 rounded-xl bg-gray-200 text-gray-800 py-2 \",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"auto\",\n        onClick: () => setDisplay(!display),\n        type: \"text\",\n        className: \"bg-gray-200 text-gray-800 pl-4 focus:outline-none flex-grow\",\n        placeholder: \"Search products\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchIcon, {\n        className: \"text-[#B1B3B5] w-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), display && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => updateItems(),\n        className: \"z-50 absolute top-[6.2rem]  w-[38vw] h-[50vh] bg-gray-100 \",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold mb-3\",\n          children: [\"Searching for \", search, \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"w-full\",\n          children: searchData && searchData.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/product/${product._id}`,\n              className: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"border border-y-2 border-x-0 border-black  bg-white py-2 px-6\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 21\n            }, this)\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Search, \"Yai8HWPqUGTMh2ZC3O7vqA/rmYA=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["HeartIcon","SearchIcon","React","useCallback","useEffect","useState","useRef","debounce","axios","Link","Search","display","setDisplay","search","setSearch","searchData","setSearchData","wrapperRef","debouncedSearchAutocomplete","data","get","undefined","console","log","window","addEventListener","handleClickOutside","removeEventListener","event","current","wrap","contains","target","updateItems","e","value","map","product","_id","name"],"sources":["/Users/rohitparakh/Desktop/Websites/MERN/Ecom_Store/frontend/src/components/Search.js"],"sourcesContent":["import { HeartIcon, SearchIcon } from \"@heroicons/react/outline\";\nimport React, { useCallback, useEffect, useState, useRef } from \"react\";\nimport { debounce } from \"lodash\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nconst Search = () => {\n  const [display, setDisplay] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [searchData, setSearchData] = useState();\n  const wrapperRef = useRef(null);\n\n  useEffect(() => {\n    debouncedSearchAutocomplete(search);\n  }, [search]);\n\n  const debouncedSearchAutocomplete = useCallback(\n    debounce(async (search) => {\n      // console.log(`Searching result after 500 ${search}`)\n      const { data } = await axios.get(\n        `https://localhost:8000/api/search?query=${\n          search !== \"\" ? search : undefined\n        }`\n      );\n      setSearchData(data);\n      console.log(data);\n    }, 500),\n    []\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      window.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = (event) => {\n    const { current: wrap } = wrapperRef;\n    if (wrap && !wrap.contains(event.target)) {\n      setDisplay(false);\n    }\n  };\n\n  const updateItems = (searchData) => {\n    setSearchData(searchData);\n    setDisplay(false);\n  };\n\n  return (\n    <div\n      ref={wrapperRef}\n      className=\"hidden  bg-white lg:flex items-center  left-1/2  \"\n    >\n      <div className=\" flex items-center w-full lg:w-[40vw]   px-4 rounded-xl bg-gray-200 text-gray-800 py-2 \">\n        <input\n          id=\"auto\"\n          onClick={() => setDisplay(!display)}\n          type=\"text\"\n          className=\"bg-gray-200 text-gray-800 pl-4 focus:outline-none flex-grow\"\n          placeholder=\"Search products\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n        <SearchIcon className=\"text-[#B1B3B5] w-8\" />\n        {display && (\n          <div\n            onClick={() => updateItems()}\n            className=\"z-50 absolute top-[6.2rem]  w-[38vw] h-[50vh] bg-gray-100 \"\n          >\n            <p className=\"font-semibold mb-3\">Searching for {search}...</p>\n            <ul className=\"w-full\">\n              {searchData &&\n                searchData.map((product) => (\n                  <li key={product._id}>\n                    <Link to={`/product/${product._id}`} className=\"\">\n                      <p className=\"border border-y-2 border-x-0 border-black  bg-white py-2 px-6\">\n                        {product.name}\n                      </p>\n                    </Link>\n                  </li>\n                ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}