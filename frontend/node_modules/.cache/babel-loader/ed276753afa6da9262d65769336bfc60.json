{"ast":null,"code":"var _jsxFileName = \"/Users/rohitparakh/Desktop/Websites/MERN/Ecom_Store/frontend/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport { HeartIcon, SearchIcon } from '@heroicons/react/outline';\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport { debounce } from \"lodash\";\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const [display, setDisplay] = useState(false);\n  const [search, setSearch] = useState('');\n  const [searchData, setSearchData] = useState();\n  const wrapperRef = useRef(null);\n  useEffect(() => {\n    debouncedSearchAutocomplete(search);\n  }, [search]);\n  const debouncedSearchAutocomplete = useCallback(debounce(async search => {\n    // console.log(`Searching result after 500 ${search}`)\n    const {\n      data\n    } = await axios.get(`/api/search?query=${search !== '' ? search : undefined}`);\n    setSearchData(data);\n    console.log(data);\n  }, 500), []);\n  useEffect(() => {\n    window.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      window.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    const {\n      current: wrap\n    } = wrapperRef;\n\n    if (wrap && !wrap.contains(event.target)) {\n      setDisplay(false);\n    }\n  };\n\n  const updateItems = searchData => {\n    setSearchData(searchData);\n    setDisplay(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: wrapperRef,\n    className: \"hidden  bg-white lg:flex items-center  left-1/2  \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" flex items-center w-full lg:w-[40vw]   px-4 rounded-xl bg-gray-200 text-gray-800 py-2 \",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"auto\",\n        onClick: () => setDisplay(!display),\n        type: \"text\",\n        className: \"bg-gray-200 text-gray-800 pl-4 focus:outline-none flex-grow\",\n        placeholder: \"Search products\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SearchIcon, {\n        className: \"text-[#B1B3B5] w-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), display && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => updateItems(),\n        className: \"z-50 absolute top-[6.2rem]  w-[38vw] h-[50vh] bg-gray-100 \",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold mb-3\",\n          children: [\"Searching for \", search, \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"w-full\",\n          children: searchData && searchData.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/product/${product._id}`,\n              className: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"border border-y-2 border-x-0 border-black  bg-white py-2 px-6\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 41\n            }, this)\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Search, \"/34E6vT86xdhcRuKszuc5Xxt18M=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["HeartIcon","SearchIcon","React","useCallback","useEffect","useState","useRef","debounce","axios","Link","Search","display","setDisplay","search","setSearch","searchData","setSearchData","wrapperRef","debouncedSearchAutocomplete","data","get","undefined","console","log","window","addEventListener","handleClickOutside","removeEventListener","event","current","wrap","contains","target","updateItems","e","value","map","product","_id","name"],"sources":["/Users/rohitparakh/Desktop/Websites/MERN/Ecom_Store/frontend/src/components/Search.js"],"sourcesContent":["import { HeartIcon, SearchIcon } from '@heroicons/react/outline'\nimport React, { useCallback, useEffect, useState, useRef } from 'react'\nimport { debounce } from \"lodash\"\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\n\nconst Search = () => {\n    const [display,setDisplay] = useState(false)\n    const [search,setSearch] = useState('')\n    const [searchData,setSearchData] = useState()\n    const wrapperRef = useRef(null);\n\n    useEffect(() => {\n        debouncedSearchAutocomplete(search)    \n    },[search])\n\n    const debouncedSearchAutocomplete = useCallback(\n        debounce(async(search) => {\n            // console.log(`Searching result after 500 ${search}`)\n            const {data} = await  axios.get(`/api/search?query=${search !== '' ? search: undefined}`)\n            setSearchData(data)\n            console.log(data)\n        }, 500),\n        []\n    )\n\n    useEffect(() => {\n    window.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      window.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n\n  const handleClickOutside = event => {\n    const { current: wrap } = wrapperRef;\n    if (wrap && !wrap.contains(event.target)) {\n      setDisplay(false);\n    }\n  };\n\n    const updateItems = searchData => {\n        setSearchData(searchData);\n        setDisplay(false);\n    }\n    \n    return (\n        \n           <div ref={wrapperRef} className='hidden  bg-white lg:flex items-center  left-1/2  '>\n                <div className=' flex items-center w-full lg:w-[40vw]   px-4 rounded-xl bg-gray-200 text-gray-800 py-2 '>\n                    <input id=\"auto\" onClick={() => setDisplay(!display)} type=\"text\" className=\"bg-gray-200 text-gray-800 pl-4 focus:outline-none flex-grow\" placeholder='Search products' value={search} onChange={(e)=> setSearch(e.target.value)}/>\n                    <SearchIcon className=\"text-[#B1B3B5] w-8\"  />\n                    {display && (\n                         <div onClick={() => updateItems()} className='z-50 absolute top-[6.2rem]  w-[38vw] h-[50vh] bg-gray-100 '>\n                        <p className='font-semibold mb-3'>Searching for {search}...</p>\n                        <ul className='w-full'>\n                            {\n                                searchData &&\n                                searchData.map(product => (\n                                    <li key={product._id}>\n                                        <Link to={`/product/${product._id}`} className=''>\n                                            <p className='border border-y-2 border-x-0 border-black  bg-white py-2 px-6'>{product.name}</p>\n                                        </Link>\n                                    </li>\n                                ))\n                            }\n                        </ul>\n                    </div>\n                    )}\n                   \n                </div>\n            </div>\n\n    \n    )\n}\n\nexport default Search\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}